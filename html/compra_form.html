<!-- Main -->
<div class="w3-row-padding w3-margin-bottom">

    <!-- Formulário para compra de produto -->
    <div class="w3-card-4 w3-white w3-margin">
        <div class="w3-container w3-teal">
            <h2 class="w3-center">Compra de produtos</h2>
        </div>
        <form class="w3-container" enctype="multipart/form-data" method="post"
            action="index.php?page=compra_form&action=salvar">

            <!-- Código e data -->
            <div class="w3-row-padding w3-section">
                <div class="w3-third">
                    <label class="w3-text-teal" for="codigo">Código</label>
                    <input class="w3-input w3-border" type="text" name="id" value="{id}" readonly>
                </div>
                <div class="w3-third">
                    <label class="w3-text-teal" for="status">Data de recebimento</label>
                    <input class="w3-input w3-border" type="date" name="data_recebimento" id="data_recebimento" value="{data_recebimento}">
                </div>
                <div class="w3-third">
                    <label class="w3-text-teal" for="status">Data de validade</label>
                    <input class="w3-input w3-border" type="date" name="data_validade" id="data_validade" value="{data_validade}">
                </div>
            </div>

            <!-- id e descrição do produto -->
            <div class="w3-row-padding w3-section">
                <div class="w3-col m12" >
                    <label class="w3-text-teal" for="descricao">Descrição</label>
                    <select class="w3-select w3-border" name="produto" id="produto">
                        <option value="" disabled selected>Selecione o produto</option>
                        {produto}
                    </select>
                </div>
            </div>
            <!-- Quantidades Compra -->
            <div class="w3-row-padding w3-section">
                <div class="w3-quarter">
                    <label class="w3-text-teal" for="quantidade_de_caixa">Quantidade de caixa</label>
                    <input class="w3-input w3-border" oninput="calculacompra()" type="number" step="0.01" name="quantidade_de_caixa" id="quantidade_de_caixa" value="{quantidade_de_caixa}">
                </div>
                <div class="w3-quarter">
                    <label class="w3-text-teal" for="quantidade_por_caixa">Quantidade por caixa</label>
                    <input class="w3-input w3-border" oninput="calculaPrecoUn()" type="number" step="0.01" name="quantidade_por_caixa"
                        id="quantidade_por_caixa" value="{quantidade_por_caixa}">
                </div>
                <div class="w3-quarter">
                    <label class="w3-text-teal" for="preco_caixa">Preço da caixa</label>
                    <input class="w3-input w3-border" oninput="calculacompra()" type="number" step="0.01" name="preco_caixa"
                        id="preco_caixa" value="{preco_caixa}">
                </div>
                <div class="w3-quarter">
                    <label class="w3-text-teal" for="preco_unitario">Preço Un.</label>
                    <input class="w3-input w3-border" type="number" step="0.01" name="preco_unitario" id="preco_unitario"
                        value="{preco_unitario}" readonly>
                </div>
            </div>

            <!-- Estoque e Precificação -->
            <div class=" w3-row-padding w3-section">
                <div class="w3-third">
                    <label class="w3-text-teal" for="margem_lucro">Margem para venda (%)</label>
                    <input class="w3-input w3-border" oninput="calculaPrecoVenda()" type="number" step="0.01"
                        name="margem_lucro" id="margem_lucro" value="{margem_lucro}">
                </div>
                <div class="w3-third">
                    <label class="w3-text-teal" for="preco_venda">Preço de venda</label>
                    <input class="w3-input w3-border" type="number" step="0.01" name="preco_venda" id="preco_venda"
                        value="{preco_venda}" readonly>
                </div>
                <div class="w3-third">
                    <label class="w3-text-teal" for="custo_total">Valor total da compra</label>
                    <input class="w3-input w3-border" type="number" step="0.01" name="custo_total" id="custo_total"
                        value="{custo_total}" readonly>
                </div>
            </div>
            <!--Botão adiciona o item-->
            <button class="w3-button w3-section w3-teal" type="button" onclick="adicionarItem()">Adicionar Produto</button>

            <div class="w3-container w3-light-grey">
                <h3>Lista de Compras</h3>
                <table id="lista-compras" class="w3-table w3-bordered w3-white w3-section">
                    <thead>
                        <tr class="w3-teal">
                            <th>Produto</th>
                            <th>Quantidade</th>
                            <th>Preço Unitário</th>
                            <th>Subtotal</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <h4>Total: R$ <span id="total-compra">0.00</span></h4>
                <input type="hidden" name="totalCompra" id="totalCompra">
                <input type="hidden" name="itens_compra" id="itens_compra">
            </div>

            <div class="w3-container"> 
                <input class="w3-btn w3-section w3-teal" type="submit" value="Finalizar">
            </div>
            <script src="assets/js/compra.js"></script>
        </form>
    </div>
</div>